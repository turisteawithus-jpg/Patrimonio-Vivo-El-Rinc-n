<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patrimonio Vivo "El Rinc√≥n" - Vota por Suba</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        html { scroll-behavior: smooth; }
        body {
            background-color: #FFFFFF;
            color: #1F2937;
            font-family: 'Poppins', sans-serif;
        }
        .font-brand {
            font-family: 'Caveat', cursive;
        }
        .text-teal { color: #008080; }
        .text-charcoal { color: #1F2937; }
        .bg-charcoal { background-color: #1F2937; }
        .border-charcoal { border-color: #1F2937; }
        .bg-fuchsia { background-color: #CB2B92; }
        .bg-orange { background-color: #FD5800; }
        .btn {
            transition: all 0.3s ease;
            box-shadow: 4px 4px 0px #1F2937;
        }
        .btn:hover {
            transform: translateY(-2px) translateX(-2px);
            box-shadow: 6px 6px 0px #1F2937;
        }
        .btn:active {
            transform: translateY(2px) translateX(2px);
            box-shadow: 2px 2px 0px #1F2937;
        }
        .texture-bg {
            background-color: #FAF9F6;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23008080' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        .loader { display: inline-block; text-align: center; }
        .loader span { display: inline-block; width: 10px; height: 10px; background-color: #008080; border-radius: 50%; animation: bounce 1.4s infinite ease-in-out both; }
        .loader .bounce1 { animation-delay: -0.32s; }
        .loader .bounce2 { animation-delay: -0.16s; }
        @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1.0); } }
        .modal-overlay { transition: opacity 0.3s ease; }
        .modal-content { transition: transform 0.3s ease; }
        .carousel-slide { display: none; }
        .carousel-slide.active { display: block; }
        .interactive-tab {
            transition: all 0.3s ease;
            border-bottom-width: 4px;
            border-bottom-color: transparent;
        }
        .interactive-tab.active {
            border-bottom-color: #CB2B92;
            color: #008080;
        }
    </style>
</head>
<body class="antialiased">

    <header class="texture-bg">
        <div class="container mx-auto px-6 py-12 text-center">
            <div class="inline-block">
                <img src="LOGO.png" alt="Logo de Turistea with us" class="h-32 sm:h-40 mx-auto">
                <div class="flex justify-center space-x-2 mt-3">
                    <div class="h-2 w-16 bg-orange rounded-full"></div>
                    <div class="h-2 w-8 bg-orange rounded-full"></div>
                    <div class="h-2 w-4 bg-orange rounded-full"></div>
                </div>
            </div>
            <h2 class="font-brand text-4xl md:text-5xl text-teal mt-6">Presenta:</h2>
            <h1 class="text-charcoal font-bold text-5xl md:text-7xl mt-4 leading-tight">Patrimonio Vivo<br class="hidden md:block"> "El Rinc√≥n"</h1>
            <p class="text-charcoal text-xl md:text-2xl mt-6 max-w-3xl mx-auto">Conectando comunidad, naturaleza y futuro en el coraz√≥n de Suba.</p>
        </div>
    </header>

    <main class="container mx-auto px-6 py-16">

        <section id="sue√±o" class="text-center max-w-4xl mx-auto mb-20">
            <h2 class="font-brand text-5xl md:text-6xl text-teal mb-6">¬øQu√© so√±amos para Suba?</h2>
            <p class="text-lg text-charcoal leading-relaxed">So√±amos con un barrio donde nuestras historias ancestrales y las voces de nuestros abuelos se unan con la creatividad de los j√≥venes. Un lugar donde la tecnolog√≠a, como la inteligencia artificial, no sea una amenaza, sino una herramienta para que nuestra juventud cree, innove y se prepare para el futuro.</p>
        </section>

        <section id="como" class="mb-20">
            <h2 class="font-brand text-5xl md:text-6xl text-teal mb-10 text-center">As√≠ lo haremos realidad</h2>
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                <div class="bg-white p-6 rounded-2xl border-2 border-charcoal text-center"><div class="text-5xl mb-4">üí¨</div><h3 class="font-bold text-xl text-teal mb-2">Rescatando Historias</h3><p class="text-charcoal">Grabaremos las voces y saberes de la comunidad Muisca y de nuestros mayores.</p></div>
                <div class="bg-white p-6 rounded-2xl border-2 border-charcoal text-center"><div class="text-5xl mb-4">üé®</div><h3 class="font-bold text-xl text-teal mb-2">J√≥venes Creadores + IA</h3><p class="text-charcoal">Realizaremos talleres donde los j√≥venes usar√°n la IA como una aliada creativa.</p></div>
                <div class="bg-white p-6 rounded-2xl border-2 border-charcoal text-center"><div class="text-5xl mb-4">üèûÔ∏è</div><h3 class="font-bold text-xl text-teal mb-2">Arte que une al Barrio</h3><p class="text-charcoal">Crearemos un gran mural con realidad aumentada y una cartilla digital educativa.</p></div>
                <div class="bg-white p-6 rounded-2xl border-2 border-charcoal text-center"><div class="text-5xl mb-4">ü§ù</div><h3 class="font-bold text-xl text-teal mb-2">Alianzas que construyen</h3><p class="text-charcoal">Trabajaremos mano a mano con l√≠deres, Juntas de Acci√≥n Comunal y colegios.</p></div>
            </div>
        </section>

        <section id="impacto" class="mb-20">
            <h2 class="font-brand text-5xl md:text-6xl text-teal mb-10 text-center">¬øPor qu√© este proyecto es clave?</h2>
            <div class="max-w-4xl mx-auto bg-white p-4 sm:p-6 rounded-2xl border-2 border-charcoal">
                <div class="flex flex-wrap justify-center border-b-2 border-charcoal/20 mb-4">
                    <button id="tab-youth" class="interactive-tab text-charcoal font-semibold text-lg p-4 active">Para nuestros J√≥venes</button>
                    <button id="tab-community" class="interactive-tab text-charcoal font-semibold text-lg p-4">Para nuestra Comunidad</button>
                    <button id="tab-heritage" class="interactive-tab text-charcoal font-semibold text-lg p-4">Para nuestro Patrimonio</button>
                </div>
                <div id="content-container" class="p-4 text-charcoal text-lg leading-relaxed"></div>
            </div>
        </section>
        
        <section id="gemini-interaction" class="mb-20">
            <h2 class="font-brand text-5xl md:text-6xl text-teal mb-10 text-center">Participa con la IA ü§ñ‚ú®</h2>
             <p class="text-lg text-charcoal leading-relaxed mb-8 max-w-4xl mx-auto text-center">
                Experimenta el poder creativo de la Inteligencia Artificial que usaremos en nuestros talleres. ¬°Insp√≠rate y ay√∫danos a difundir la palabra!
            </p>
            <div class="max-w-4xl mx-auto text-center grid md:grid-cols-2 gap-8">
                <div class="bg-white p-6 rounded-2xl border-2 border-charcoal text-left">
                    <h3 class="font-bold text-xl text-teal mb-3 text-center">Crea un Micro-Cuento</h3>
                    <p class="text-charcoal mb-4 text-sm">Escribe 3 palabras clave (ej: humedal, abuela, futuro) y mira la magia.</p>
                    <input id="story-keywords" type="text" placeholder="Palabras clave separadas por coma" class="w-full p-2 border-2 border-charcoal/30 rounded-md mb-4">
                    <button id="generate-story-btn" class="btn bg-teal-600 w-full text-white font-bold py-3 px-6 rounded-lg text-lg">Generar Historia ‚ú®</button>
                    <div id="story-loader" class="mt-4 hidden"><div class="loader"><span class="bounce1"></span><span class="bounce2"></span><span class="bounce3"></span></div></div>
                    <div id="story-result" class="mt-4 p-4 bg-gray-50 rounded-md border text-charcoal" style="white-space: pre-wrap;"></div>
                </div>
                <div class="bg-white p-6 rounded-2xl border-2 border-charcoal text-left flex flex-col">
                    <h3 class="font-bold text-xl text-teal mb-3 text-center">Mensaje para Compartir</h3>
                    <p class="text-charcoal mb-4 text-sm">Genera un mensaje para invitar a tus vecinos a votar.</p>
                     <button id="generate-message-btn" class="btn bg-teal-600 w-full text-white font-bold py-3 px-6 rounded-lg text-lg mt-auto">Generar Mensaje ‚ú®</button>
                    <div id="message-loader" class="mt-4 hidden"><div class="loader"><span class="bounce1"></span><span class="bounce2"></span><span class="bounce3"></span></div></div>
                    <div id="message-result-container" class="mt-4 hidden">
                        <div id="message-result" class="p-4 bg-gray-50 rounded-md border text-charcoal" style="white-space: pre-wrap;"></div>
                        <button id="copy-message-btn" class="btn bg-orange w-full text-white font-bold py-2 mt-3">Copiar Mensaje</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="lideres" class="texture-bg rounded-2xl p-10 mb-20 text-center">
            <div class="max-w-4xl mx-auto">
                <h2 class="font-brand text-5xl md:text-6xl text-teal mb-6">Un llamado a l√≠deres y lideresas</h2>
                <p class="text-lg text-charcoal leading-relaxed mb-8">
                    A ustedes, l√≠deres y lideresas de la comunidad, miembros de Juntas de Acci√≥n Comunal, colectivos, organizaciones sociales y culturales: este proyecto es una herramienta poderosa para ustedes. Nos ayuda a integrar a los j√≥venes, a generar orgullo por nuestro territorio y a crear espacios de encuentro y di√°logo. Apoyar "Patrimonio Vivo" es invertir directamente en el fortalecimiento de nuestro tejido social y en un futuro m√°s pr√≥spero y unido para Suba. ¬°Contamos con su liderazgo para difundir esta iniciativa!
                </p>
                 <a href="#vota" class="btn bg-fuchsia text-white font-bold py-3 px-6 sm:py-4 sm:px-8 rounded-lg text-lg sm:text-xl">¬°Ay√∫danos a promocionar el voto!</a>
            </div>
        </section>

        <section id="vota" class="mb-20 text-center texture-bg rounded-2xl py-12">
            <h2 class="font-brand text-5xl md:text-6xl text-teal mb-6">¬°Tu voto construye comunidad!</h2>
            <div class="bg-white max-w-xl mx-auto p-8 rounded-2xl border-4 border-dashed border-orange">
                <p class="text-charcoal text-2xl font-semibold">Usa el c√≥digo:</p>
                <div class="my-4 px-6 py-4 bg-fuchsia text-white text-7xl font-bold rounded-xl inline-block tracking-widest">53303</div>
            </div>
            <p class="text-xl text-charcoal max-w-3xl mx-auto mt-8">Elige c√≥mo quieres participar y ay√∫danos a hacer este sue√±o realidad.</p>
        </section>

        <section id="como-votar" class="mb-20">
            <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                <div id="open-chatico-modal" class="bg-white p-8 rounded-2xl border-2 border-charcoal text-center cursor-pointer transform hover:-translate-y-2 transition-transform duration-300">
                    <div class="text-6xl mb-4">ü§ñ</div>
                    <h3 class="font-bold text-2xl text-teal mb-2">Voto Virtual con Chatico</h3>
                    <p class="text-charcoal">Te guiamos paso a paso para que votes desde tu celular por WhatsApp.</p>
                </div>
                <div id="go-to-physical-points" class="bg-white p-8 rounded-2xl border-2 border-charcoal text-center cursor-pointer transform hover:-translate-y-2 transition-transform duration-300">
                    <div class="text-6xl mb-4">üìç</div>
                    <h3 class="font-bold text-2xl text-teal mb-2">Voto F√≠sico en Puntos</h3>
                    <p class="text-charcoal">Encuentra el punto de votaci√≥n m√°s cercano a tu barrio, con fechas y horarios.</p>
                </div>
            </div>
        </section>

        <section id="puntos-votacion" class="mb-20 pt-16 -mt-16">
             <h2 class="font-brand text-5xl md:text-6xl text-teal mb-10 text-center">Encuentra tu Punto de Votaci√≥n</h2>
             <div class="max-w-2xl mx-auto bg-white p-8 rounded-2xl border-2 border-charcoal">
                <p class="text-charcoal mb-4">Escribe el nombre de tu barrio en Suba y te mostraremos los puntos de votaci√≥n m√°s cercanos.</p>
                <div class="flex flex-col sm:flex-row gap-4">
                    <input type="text" id="barrio-input" placeholder="Ej: El Rinc√≥n, Salitre, Corinto..." class="w-full p-3 border-2 border-charcoal/30 rounded-md">
                    <button id="buscar-puntos-btn" class="btn bg-orange text-white font-bold py-3 px-8 rounded-lg">Buscar</button>
                </div>
                <div id="puntos-loader" class="mt-6 hidden"><div class="loader"><span class="bounce1"></span><span class="bounce2"></span><span class="bounce3"></span></div></div>
                <div id="puntos-result" class="mt-6 space-y-4"></div>
             </div>
        </section>
        
        <footer class="bg-charcoal text-white mt-20 -mx-6 -mb-16 px-6 py-10">
            <div class="container mx-auto text-center">
                <h3 class="font-brand text-4xl text-white">Turistea with us</h3>
                <p class="mt-2">Creando experiencias que conectan.</p>
                <div class="flex justify-center items-center space-x-6 mt-6">
                    <a href="mailto:turisteawithus@gmail.com" class="flex items-center space-x-2 hover:text-orange transition-colors"><span>turisteawithus@gmail.com</span></a>
                    <a href="tel:+573208734659" class="flex items-center space-x-2 hover:text-fuchsia transition-colors"><span>+57 320 873 4659</span></a>
                </div>
            </div>
        </footer>
    </main>

    <div id="chatico-modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 opacity-0 pointer-events-none">
        <div class="modal-content bg-white w-full max-w-lg rounded-2xl p-6 transform scale-95 relative">
            <button id="close-modal-btn" class="absolute top-4 right-4 text-3xl font-bold text-charcoal/50 hover:text-charcoal">&times;</button>
            <div class="text-center mb-6">
                <h2 class="font-brand text-4xl text-teal">Gu√≠a para Votar con Chatico ü§ñ</h2>
                <a href="https://wa.me/573160231524" target="_blank" class="btn bg-green-500 text-white font-bold py-3 px-6 rounded-lg text-lg mt-4 inline-block">¬°Haz clic para hablar con Chatico!</a>
            </div>
            <div id="carousel-container" class="overflow-hidden">
                <div class="carousel-slide active text-center"><div class="text-6xl mb-2">1Ô∏è‚É£</div><h3 class="font-bold text-xl mb-2">Inicia el Chat</h3><p class="text-sm sm:text-base">Busca en WhatsApp a **Chatico** (+57 316 0231524) y escr√≠bele "**Hola**". √âl te saludar√° y te dar√° la bienvenida.</p></div>
                <div class="carousel-slide text-center"><div class="text-6xl mb-2">2Ô∏è‚É£</div><h3 class="font-bold text-xl mb-2">Elige la Opci√≥n Correcta</h3><p class="text-sm sm:text-base">Chatico te mostrar√° un men√∫. Responde escribiendo "**Participaci√≥n**". Luego, en el siguiente men√∫, selecciona "**Presupuestos Participativos**" y acepta la pol√≠tica de datos.</p></div>
                <div class="carousel-slide text-center"><div class="text-6xl mb-2">3Ô∏è‚É£</div><h3 class="font-bold text-xl mb-2">Verifica tu Identidad</h3><p class="text-sm sm:text-base">Ten tu c√©dula a la mano. El sistema te pedir√° tu tipo de documento (CC), n√∫mero y la fecha de expedici√≥n para validar que tu voto sea real.</p></div>
                <div class="carousel-slide text-center"><div class="text-6xl mb-2">4Ô∏è‚É£</div><h3 class="font-bold text-xl mb-2">Selecciona la Localidad</h3><p class="text-sm sm:text-base">Ver√°s una lista de localidades. Busca **11.- Suba**, escribe el n√∫mero **11** y env√≠alo. Chatico te pedir√° confirmar tu elecci√≥n.</p></div>
                <div class="carousel-slide text-center"><div class="text-6xl mb-2">5Ô∏è‚É£</div><h3 class="font-bold text-xl mb-2">¬°Vota por el Proyecto!</h3><p class="text-sm sm:text-base">Elige la categor√≠a **4.- Cultura, recreaci√≥n y deporte**, ingresa nuestro c√≥digo **53303** y selecciona **S√≠** para confirmar. ¬°Listo, tu voto ha sido registrado!</p></div>
            </div>
            <div class="flex justify-between items-center mt-6">
                <button id="prev-slide-btn" class="btn bg-gray-300 text-charcoal font-bold py-2 px-4 rounded-lg">Anterior</button>
                <div id="step-counter" class="font-semibold text-charcoal"></div>
                <button id="next-slide-btn" class="btn bg-orange text-white font-bold py-2 px-4 rounded-lg">Siguiente</button>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const apiKey = "AIzaSyBZ_cW20Ri2qkp65g-ihuX5CHcXZfUyjlU"; // PEGA TU CLAVE API AQU√ç
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

        // Tabs
        const tabs = {
            youth: { button: document.getElementById('tab-youth'), content: `<strong>Capacidades para el futuro:</strong> Los j√≥venes aprender√°n a usar herramientas de Inteligencia Artificial, una habilidad clave para el mercado laboral de hoy y del ma√±ana. <br><br><strong>Una voz propia:</strong> A trav√©s del arte, podr√°n expresar sus ideas y contar sus propias historias, fortaleciendo su confianza e identidad.` },
            community: { button: document.getElementById('tab-community'), content: `<strong>Lazos m√°s fuertes:</strong> El proyecto une a j√≥venes, abuelos, l√≠deres comunitarios y colegios, tejiendo una red de colaboraci√≥n y confianza en el barrio. <br><br><strong>Orgullo local:</strong> Al crear arte sobre nuestra propia cultura, generamos un sentimiento de pertenencia y orgullo por vivir en Suba.` },
            heritage: { button: document.getElementById('tab-heritage'), content: `<strong>Memoria viva:</strong> Rescatamos y honramos el legado Muisca y las historias de nuestros mayores, asegurando que esta riqueza cultural no se pierda. <br><br><strong>Nuevas formas de contar:</strong> Usamos la tecnolog√≠a para dar nueva vida a nuestro patrimonio de una forma innovadora y emocionante.` }
        };
        const contentContainer = document.getElementById('content-container');
        function updateContent(tabKey) {
            if(tabs[tabKey]) {
                contentContainer.innerHTML = tabs[tabKey].content;
                Object.values(tabs).forEach(tab => tab.button.classList.remove('active'));
                tabs[tabKey].button.classList.add('active');
            }
        }
        Object.keys(tabs).forEach(key => {
            if (tabs[key].button) {
                tabs[key].button.addEventListener('click', () => updateContent(key));
            }
        });
        updateContent('youth');

        // Gemini Logic
        const storyKeywordsInput = document.getElementById('story-keywords');
        const generateStoryBtn = document.getElementById('generate-story-btn');
        const storyLoader = document.getElementById('story-loader');
        const storyResult = document.getElementById('story-result');
        const generateMessageBtn = document.getElementById('generate-message-btn');
        const messageLoader = document.getElementById('message-loader');
        const messageResultContainer = document.getElementById('message-result-container');
        const messageResult = document.getElementById('message-result');
        const copyMessageBtn = document.getElementById('copy-message-btn');
        
        async function callGemini(prompt, retries = 3, delay = 1000) {
            const payload = { contents: [{ parts: [{ text: prompt }] }] };
            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                    if (!response.ok) { throw new Error(`HTTP error! status: ${response.status}`); }
                    const result = await response.json();
                    const candidate = result.candidates?.[0];
                    if (candidate && candidate.content?.parts?.[0]?.text) { return candidate.content.parts[0].text; }
                    else { throw new Error("Respuesta inv√°lida de la API."); }
                } catch (error) {
                    if (i === retries - 1) { console.error("Error fetching from Gemini API:", error); return "Lo sentimos, no pudimos generar una respuesta en este momento. Int√©ntalo de nuevo."; }
                    await new Promise(res => setTimeout(res, delay * Math.pow(2, i)));
                }
            }
        }

        if(generateStoryBtn) {
            generateStoryBtn.addEventListener('click', async () => {
                const keywords = storyKeywordsInput.value;
                if (!keywords.trim()) { storyResult.textContent = "Por favor, ingresa al menos una palabra clave."; return; }
                storyLoader.style.display = 'block';
                storyResult.textContent = '';
                generateStoryBtn.disabled = true;
                const prompt = `Escribe un micro-cuento inspirador de dos p√°rrafos para un joven de Suba, Bogot√°. El cuento debe conectar la herencia ancestral Muisca con un futuro tecnol√≥gico y esperanzador. Usa estas palabras clave: ${keywords}. El tono debe ser juvenil y optimista.`;
                storyResult.textContent = await callGemini(prompt);
                storyLoader.style.display = 'none';
                generateStoryBtn.disabled = false;
            });
        }

        if(generateMessageBtn) {
            generateMessageBtn.addEventListener('click', async () => {
                messageLoader.style.display = 'block';
                messageResultContainer.style.display = 'none';
                generateMessageBtn.disabled = true;
                const prompt = `Escribe un mensaje corto y amigable para WhatsApp para invitar a los vecinos del barrio El Rinc√≥n en Suba, Bogot√°, a votar por el proyecto 'Patrimonio Vivo'. El mensaje debe ser entusiasta, mencionar que se usan herramientas de futuro como la IA y animar a votar. Incluye el c√≥digo de votaci√≥n 53303 y emojis. MUY IMPORTANTE: El mensaje DEBE terminar con un enlace para que la gente conozca m√°s del proyecto. El enlace es: https://turisteawithus-jpg.github.io/Patrimonio-Vivo-El-Rinc-n/`;
                messageResult.textContent = await callGemini(prompt);
                messageLoader.style.display = 'none';
                messageResultContainer.style.display = 'block';
                generateMessageBtn.disabled = false;
            });
        }

        if(copyMessageBtn) {
            copyMessageBtn.addEventListener('click', () => {
                const textToCopy = messageResult.textContent;
                const tempTextarea = document.createElement('textarea');
                tempTextarea.value = textToCopy;
                document.body.appendChild(tempTextarea);
                tempTextarea.select();
                try {
                    document.execCommand('copy');
                    copyMessageBtn.textContent = '¬°Copiado!';
                    setTimeout(() => { copyMessageBtn.textContent = 'Copiar Mensaje'; }, 2000);
                } catch (err) { console.error('No se pudo copiar el texto', err); copyMessageBtn.textContent = 'Error al copiar'; }
                document.body.removeChild(tempTextarea);
            });
        }
        
        // Modal, Carousel, and Voting Points Logic
        const openModalBtn = document.getElementById('open-chatico-modal');
        const goToPhysicalPointsBtn = document.getElementById('go-to-physical-points');
        const modal = document.getElementById('chatico-modal');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const puntosVotacionSection = document.getElementById('puntos-votacion');
        const slides = document.querySelectorAll('.carousel-slide');
        const prevBtn = document.getElementById('prev-slide-btn');
        const nextBtn = document.getElementById('next-slide-btn');
        const stepCounter = document.getElementById('step-counter');
        let currentSlide = 0;
        function showSlide(n) {
            slides.forEach(slide => slide.classList.remove('active'));
            slides[n].classList.add('active');
            stepCounter.textContent = `Paso ${n + 1} de ${slides.length}`;
            prevBtn.disabled = n === 0;
            prevBtn.style.opacity = n === 0 ? '0.5' : '1';
            nextBtn.textContent = n === slides.length - 1 ? 'Finalizar' : 'Siguiente';
        }
        prevBtn.addEventListener('click', () => { if (currentSlide > 0) { currentSlide--; showSlide(currentSlide); } });
        nextBtn.addEventListener('click', () => {
            if (currentSlide < slides.length - 1) {
                currentSlide++;
                showSlide(currentSlide);
            } else {
                closeModal();
            }
        });
        function openModal() {
            currentSlide = 0;
            showSlide(currentSlide);
            modal.classList.remove('opacity-0', 'pointer-events-none');
            modal.querySelector('.modal-content').classList.remove('scale-95');
        }
        function closeModal() {
            modal.classList.add('opacity-0', 'pointer-events-none');
            modal.querySelector('.modal-content').classList.add('scale-95');
        }
        openModalBtn.addEventListener('click', openModal);
        closeModalBtn.addEventListener('click', closeModal);
        modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });
        goToPhysicalPointsBtn.addEventListener('click', () => {
            puntosVotacionSection.scrollIntoView({ behavior: 'smooth' });
        });
        
        // Voting Points Search
        const barrioInput = document.getElementById('barrio-input');
        const buscarPuntosBtn = document.getElementById('buscar-puntos-btn');
        const puntosResult = document.getElementById('puntos-result');
        const puntosLoader = document.getElementById('puntos-loader');
        
        const votingLocations = [
            { nombre: "ALCALD√çA LOCAL DE SUBA", direccion: "Calle 146 C Bis #90-57", barrios_cercanos: ["suba", "suba centro", "alcaldia", "provenza", "las delicias", "prados de suba", "pradera de suba", "san francisco", "miraflores", "villa susana", "villa hermosa", "villa esperanza"], dias: "Varios d√≠as de Septiembre y Octubre", horarios: "9:00am - 4:00pm" },
            { nombre: "Colegio Jaime Ni√±o Diez", direccion: "Carrera 109 B #145-17", barrios_cercanos: ["pinar", "pinar de suba", "tuna alta", "jaime ni√±o"], dias: "26 de Septiembre", horarios: "7:00am - 12:00pm y 4:00pm - 7:00pm" },
            { nombre: "JAC Laguito", direccion: "Calle 129F # 98 A Bis-39", barrios_cercanos: ["el laguito", "lago de suba", "rinc√≥n", "la chucua", "trinitaria"], dias: "27 de Septiembre y 11 de Octubre", horarios: "12:00pm - 4:00pm" },
            { nombre: "Plazoleta principal del Barrio La Gaitana - JAC Gaitana", direccion: "Carrera 125 #134-68", barrios_cercanos: ["gaitana", "la gaitana", "lisboa", "villa cindy", "el palmar"], dias: "27 de Septiembre", horarios: "1:00pm - 5:00pm" },
            { nombre: "Sal√≥n Comunal JAC Barrio Gaitana", direccion: "Carrera 125B #134-64", barrios_cercanos: ["gaitana", "la gaitana", "lisboa", "villa cindy"], dias: "5, 17, 19 de Octubre", horarios: "9:00am - 12:00pm" },
            { nombre: "Sal√≥n Comunal San Pedro Suba", direccion: "Carrera 88 #136-68", barrios_cercanos: ["san pedro", "san pedro de suba", "rinc√≥n", "rinc√≥n de suba", "la palma", "la manuelita", "ciudad hunza"], dias: "27 de Sep, 4, 11, 18, 19, 25 de Oct", horarios: "2:00pm - 5:00pm" },
            { nombre: "Sal√≥n Comunal El Salitre", direccion: "Calle 159a #90b-80", barrios_cercanos: ["el salitre", "salitre", "suba", "niza"], dias: "28 de Septiembre", horarios: "10:00am - 2:00.pm" },
            { nombre: "Lombardia", direccion: "Carrera 109 #142-51", barrios_cercanos: ["lombardia", "pinos de lombardia", "los almendros"], dias: "28 de Septiembre", horarios: "9:00am - 12:00pm" },
            { nombre: "Sal√≥n Comunal Alcaparros", direccion: "Carrera 109a #132b-16", barrios_cercanos: ["alcaparros", "rinc√≥n", "aures", "la esperanza"], dias: "28 de Septiembre y 5 de Octubre", horarios: "28 Sep: 9am-12pm, 5 Oct: 11am-2pm" },
            { nombre: "Portal de Suba", direccion: "Avenida Suba con Avenida Cali", barrios_cercanos: ["portal suba", "aurora", "compartir", "tibabuyes", "la campi√±a", "alc√°zar de suba"], dias: "1 y 4 de Octubre", horarios: "Jornadas de 8am-12pm y 2pm-6pm" },
            { nombre: "Sal√≥n Comunal Aures 2", direccion: "Cra 105B #129D 92", barrios_cercanos: ["aures", "aures ii", "rinc√≥n", "la gaitana"], dias: "1 y 10 de Octubre", horarios: "1 Oct: 10am-2pm, 10 Oct: 8am-12pm" },
            { nombre: "PARQUE GLORIA LARA", direccion: "Calle 130F #96 15", barrios_cercanos: ["gloria lara", "gloria lara de echeverri", "rinc√≥n", "villa elisa"], dias: "2 y 4 de Octubre", horarios: "2 Oct: 8am-12pm, 4 Oct: 9:30am-1pm" },
            { nombre: "Fiesta suba cc", direccion: "Cll 147 no 101 56", barrios_cercanos: ["imperial", "fontanar", "centro suba", "turingia", "almendros"], dias: "2, 3, 4, 5 de Octubre", horarios: "10:00am - 2:00pm" },
            { nombre: "Parque Nuevo Suba", direccion: "Cra 90 #145-39", barrios_cercanos: ["nuevo suba", "las delicias", "pinar", "suba centro"], dias: "3, 4, 17, 18, 25 de Octubre", horarios: "3 Oct: 8am-12pm; 4, 17, 18, 25 Oct: 1pm-5pm" },
            { nombre: "Casa cultura rinc√≥n", direccion: "Calle 128c 96-57", barrios_cercanos: ["rinc√≥n", "el rinc√≥n", "la palma", "san cayetano", "el rubi"], dias: "3 de Octubre", horarios: "2:00pm - 5:00pm" },
            { nombre: "COLEGIO GERARDO PAREDES JORNADA NOCTURNA", direccion: "CRA 94C No 129A-04", barrios_cercanos: ["gerardo paredes", "rinc√≥n", "villa elisa", "gloria lara"], dias: "3 de Octubre", horarios: "6:00PM - 9:00PM" },
            { nombre: "Parque Altos del Rincon", direccion: "Carrera 87b #129 b", barrios_cercanos: ["altos del rinc√≥n", "rinc√≥n", "el rinc√≥n", "ciudad hunza", "altos de la esperanza"], dias: "4, 5, 11, 12, 18, 19 de Octubre", horarios: "1:00pm - 5:00pm" },
            { nombre: "Iglesia Tiempos de Refrigerio", direccion: "Avenida Ciudad de Cali No 139-35", barrios_cercanos: ["nueva tibabuyes", "fontanar", "pinos", "compartir"], dias: "5, 12, 19 de Octubre", horarios: "8:00am - 2:00pm" },
            { nombre: "Parroquia San Juan Bautista Scalabrini - Lisboa", direccion: "Calle 136 #153-86", barrios_cercanos: ["lisboa", "la gaitana", "villa cindy", "verona"], dias: "5 y 18 de Octubre", horarios: "5 Oct: 8am-12pm y 5pm-7pm; 18 Oct: 2pm-6pm" },
            { nombre: "TELECOM ARRAYANES SALON COMUNAL", direccion: "Cra 96 #128C 50", barrios_cercanos: ["telecom", "arrayanes", "rinc√≥n", "san cayetano"], dias: "6 de Octubre", horarios: "8:00AM - 12:00PM" },
            { nombre: "EL RUBI SALON COMUNAL", direccion: "Calle 128Bis #92B 12", barrios_cercanos: ["el rubi", "rinc√≥n", "la palma"], dias: "10 y 19 de Octubre", horarios: "10 Oct: 4pm-8pm, 19 Oct: 9am-1pm" },
            { nombre: "PALMA ALDEA SALON COMUNAL", direccion: "Cra 89 #130A 21", barrios_cercanos: ["palma aldea", "rinc√≥n", "la manuelita"], dias: "11 y 26 de Octubre", horarios: "11 Oct: 8am-1pm, 26 Oct: 9am-1pm" },
            { nombre: "EL ROSAL SALON COMUNAL", direccion: "Cra 100 #131 11", barrios_cercanos: ["el rosal", "rinc√≥n", "corinto"], dias: "11 de Octubre", horarios: "9:00AM - 12:00PM" },
            { nombre: "Parque Pinos de Lombard√≠a", direccion: "Calle 152 B #107-50", barrios_cercanos: ["pinos de lombardia", "lombardia", "turingia"], dias: "11, 12, 13 de Octubre", horarios: "9:00am - 5:00pm" },
            { nombre: "CIUDAD HUNZA PARROQUIA", direccion: "Cra 87D #130 20", barrios_cercanos: ["hunza", "ciudad hunza", "rinc√≥n", "cerro"], dias: "13 y 14 de Octubre", horarios: "8:00am - 12:00pm" },
            { nombre: "COLEGIO TIBABUYES UNIVERSAL (IED)", direccion: "Carrera 128A #139-13", barrios_cercanos: ["tibabuyes universal", "tibabuyes", "la gaitana"], dias: "15, 16 y 17 de Octubre", horarios: "Jornadas en la ma√±ana (7:30-11am) y tarde (1:30-5pm) en sus diferentes sedes." },
            { nombre: "ALTOS ESPERANZA SALON COMUNAL", direccion: "Cra 89 #127B 06", barrios_cercanos: ["altos de la esperanza", "rinc√≥n", "altos de chozica"], dias: "17 y 19 de Octubre", horarios: "17 Oct: 7am-1pm, 19 Oct: 9am-3pm" },
            { nombre: "VILLAS DEL RINCON SALON COMUNAL", direccion: "Cra 100A #128B 21", barrios_cercanos: ["villas del rinc√≥n", "rinc√≥n", "corinto"], dias: "18 y 19 de Octubre", horarios: "9:00am - 1:00pm" },
            { nombre: "IED REPUBLICA DOMINICANA Sede B", direccion: "Carrera 123 #129 D-55", barrios_cercanos: ["republica dominicana", "gaitana"], dias: "21 de Octubre", horarios: "Dos jornadas: 9am-11am y 1pm-3pm" }
        ];

        const barrioUPZMap = {
            "acacias": "Suba", "alaska": "Suba", "alc√°zar de suba": "Suba", "almendros de suba": "Suba", "almendros norte": "Suba", "alto de la toma": "Suba", "bosques de san jorge": "Suba", "campanella": "Suba", "el pencil": "Suba", "el pinar": "Suba", "el pino": "Suba", "el p√≥rtico": "Suba", "el salitre": "Suba", "java": "Suba", "la campi√±a": "Suba", "la fontana": "Suba", "las flores": "Suba", "las orqu√≠deas": "Suba", "londres": "Suba", "miraflores": "Suba", "monarcas": "Suba", "navetas": "Suba", "pinar de suba": "Suba", "portal de las mercedes": "Suba", "pradera de suba": "Suba", "prados de suba": "Suba", "rinc√≥n de santa in√©s": "Suba", "san francisco": "Suba", "santa isabel": "Suba", "suba centro": "Suba", "suba compartir": "Suba", "tuna alta": "Suba", "tuna baja": "Suba", "turingia": "Suba", "vereda suba cerros": "Suba", "villa del campo": "Suba", "villa esperanza": "Suba", "villa hermosa": "Suba", "villa susana": "Suba",
            "alcaparros": "El Rinc√≥n", "almirante col√≥n": "El Rinc√≥n", "almonacid": "El Rinc√≥n", "altos de chozica": "El Rinc√≥n", "altos de la esperanza": "El Rinc√≥n", "amberes": "El Rinc√≥n", "antonio granados": "El Rinc√≥n", "arrayanes": "El Rinc√≥n", "aures": "El Rinc√≥n", "bochalema": "El Rinc√≥n", "catalina": "El Rinc√≥n", "ciudad hunza": "El Rinc√≥n", "ciudadela cafam": "El Rinc√≥n", "costa azul": "El Rinc√≥n", "costa rica": "El Rinc√≥n", "el aguinaldo": "El Rinc√≥n", "el arenal": "El Rinc√≥n", "el carmen": "El Rinc√≥n", "el cerezo": "El Rinc√≥n", "el c√≥ndor": "El Rinc√≥n", "el jord√°n-la esperanza": "El Rinc√≥n", "el naranjal": "El Rinc√≥n", "el ocal": "El Rinc√≥n", "el palmar": "El Rinc√≥n", "el p√≥rtico": "El Rinc√≥n", "el progreso": "El Rinc√≥n", "el refugio de suba": "El Rinc√≥n", "el rubi": "El Rinc√≥n", "el tabor": "El Rinc√≥n", "gloria lara de echeverri": "El Rinc√≥n", "guillermo n√∫√±ez": "El Rinc√≥n", "jaime bermeo": "El Rinc√≥n", "jap√≥n": "El Rinc√≥n", "java ii sector": "El Rinc√≥n", "la aguadita": "El Rinc√≥n", "la alameda": "El Rinc√≥n", "la aurora": "El Rinc√≥n", "la chucua": "El Rinc√≥n", "la esmeralda": "El Rinc√≥n", "la esperanza (calle 131 a)": "El Rinc√≥n", "la estanzuela": "El Rinc√≥n", "la flor": "El Rinc√≥n", "la flora": "El Rinc√≥n", "la manuelita": "El Rinc√≥n", "la palma": "El Rinc√≥n", "lago de suba": "El Rinc√≥n", "las flores": "El Rinc√≥n", "lombardia": "El Rinc√≥n", "los arrayanes": "El Rinc√≥n", "los naranjos": "El Rinc√≥n", "los nogales": "El Rinc√≥n", "naranjos altos": "El Rinc√≥n", "nuevo corinto": "El Rinc√≥n", "palma aldea": "El Rinc√≥n", "potrerillo": "El Rinc√≥n", "puerta del sol": "El Rinc√≥n", "rinc√≥n de suba": "El Rinc√≥n", "rinc√≥n el c√≥ndor": "El Rinc√≥n", "rinc√≥n-escuela": "El Rinc√≥n", "riobamba": "El Rinc√≥n", "rodrigo lara bonilla": "El Rinc√≥n", "san cayetano": "El Rinc√≥n", "san isidro norte": "El Rinc√≥n", "san jorge": "El Rinc√≥n", "san miguel": "El Rinc√≥n", "san pedro": "El Rinc√≥n", "santa ana de suba": "El Rinc√≥n", "taberin": "El Rinc√≥n", "telecom arrayanes": "El Rinc√≥n", "teusaquillo de suba": "El Rinc√≥n", "tibabuyes": "El Rinc√≥n", "trinitaria": "El Rinc√≥n", "villa alexandra": "El Rinc√≥n", "villa catalina": "El Rinc√≥n", "villa elisa": "El Rinc√≥n", "villa mar√≠a": "El Rinc√≥n", "villas del rinc√≥n": "El Rinc√≥n",
            "atenas": "Tibabuyes", "berl√≠n": "Tibabuyes", "bilbao": "Tibabuyes", "ca√±iza i, ii y iii": "Tibabuyes", "carolina ii y iii": "Tibabuyes", "compartir": "Tibabuyes", "el cedro": "Tibabuyes", "la gaitana": "Tibabuyes", "la isabela": "Tibabuyes", "lisboa": "Tibabuyes", "los nogales de tibabuyes": "Tibabuyes", "miramar": "Tibabuyes", "nueva tibabuyes": "Tibabuyes", "nuevo corinto": "Tibabuyes", "prados de santa b√°rbara": "Tibabuyes", "rinc√≥n de boyac√°": "Tibabuyes", "sabana de tibabuyes": "Tibabuyes", "san carlos de suba": "Tibabuyes", "san carlos de tibabuyes": "Tibabuyes", "san pedro de tibabuyes": "Tibabuyes", "santa cecilia": "Tibabuyes", "santa rita": "Tibabuyes", "tibabuyes universal": "Tibabuyes", "toscana": "Tibabuyes", "vereda suba-rinc√≥n": "Tibabuyes", "vereda tibabuyes": "Tibabuyes", "verona": "Tibabuyes", "villa cindy": "Tibabuyes", "villa de las flores": "Tibabuyes", "villa gloria": "Tibabuyes"
        };
        
        function findLocations() {
            const userInput = barrioInput.value.toLowerCase().trim();
            if (!userInput) { puntosResult.innerHTML = `<p class="text-red-600">Por favor, escribe un barrio para buscar.</p>`; return; }
            puntosLoader.style.display = 'block';
            puntosResult.innerHTML = '';
            
            setTimeout(() => {
                let results = votingLocations.filter(location => 
                    location.barrios_cercanos.some(barrio => barrio.includes(userInput)) || location.nombre.toLowerCase().includes(userInput)
                );

                let fallbackMessage = '';

                if (results.length === 0) {
                    const searchedUPZ = barrioUPZMap[userInput];
                    if (searchedUPZ) {
                        const barriosInSameUPZ = Object.keys(barrioUPZMap).filter(barrio => barrioUPZMap[barrio] === searchedUPZ);
                        results = votingLocations.filter(location => 
                            location.barrios_cercanos.some(b => barriosInSameUPZ.includes(b))
                        );
                        if (results.length > 0) {
                             fallbackMessage = `<p class="mb-4 text-sm text-gray-600">No encontramos un punto de votaci√≥n directamente en tu barrio. Estos son los m√°s cercanos en tu zona (UPZ ${searchedUPZ}):</p>`;
                        }
                    }
                }

                puntosLoader.style.display = 'none';

                if (results.length === 0) {
                    puntosResult.innerHTML = `<p>No se encontraron puntos de votaci√≥n para "${barrioInput.value}". Intenta con un barrio vecino o el nombre del lugar.</p>`;
                } else {
                    let html = results.map(location => {
                        const encodedAddress = encodeURIComponent(`${location.direccion}, Bogot√°, Colombia`);
                        const mapsUrl = `https://www.google.com/maps/dir/?api=1&destination=${encodedAddress}`;
                        return `
                        <div class="border border-charcoal/20 p-4 rounded-lg">
                            <h4 class="font-bold text-teal text-lg">${location.nombre}</h4>
                            <p><span class="font-semibold">Direcci√≥n:</span> 
                                <a href="${mapsUrl}" target="_blank" class="text-teal-600 hover:underline">
                                    ${location.direccion} üìç <span class="text-sm italic text-gray-500">(haz clic para ver la ruta)</span>
                                </a>
                            </p>
                            <p><span class="font-semibold">D√≠as:</span> ${location.dias}</p>
                            <p><span class="font-semibold">Horarios:</span> ${location.horarios}</p>
                        </div>
                    `}).join('');
                    puntosResult.innerHTML = fallbackMessage + html;
                }
            }, 500);
        }
        
        buscarPuntosBtn.addEventListener('click', findLocations);
        barrioInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') findLocations(); });

    });
    </script>
</body>
</html>

